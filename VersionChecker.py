import requests
import json
import time

true = True
false = False #fuck off python stop making us capitalize this shit

#change these to true or false based on what you want to be updated to your webhook
infoToUpdate = {
    "Synapse" : true,
    "Script-Ware" : true,
    "Temple" : true,
    "KRNL" : false,
    "Electron" : false,
    "WeAreDevs" : false,
    "Oxygen" : false,
    "Fluxus" : false,
    "Celestial" : false,
    "Comet" : false,
    "DX9WARE" : false,
    "Ro-Ware" : false
    
}
#change this if you want a channel where all updates are posted
singleChannelUpdate = true
yourWebhook = "webhook here"

#change this if you want multiple channels for individual exploit update announcements
individualUpdates = false
multiChannelWebhookUrls = {
    "Synapse" : "",
    "Script-Ware" : "",
    "Temple" : "",
    "KRNL" : "",
    "Electron" : "",
    "WeAreDevs" : "",
    "Oxygen" : "",
    "Fluxus" : "",
    "Celestial" : "",
    "Comet" : "",
    "DX9WARE" : "",
    "Ro-Ware" : ""
    
}

#change this to how often you want the bot to check exploits (in approx. seconds)
delayTime = 30

#change this if you want it to print info on what the bot is currently doing. useful for debugging
outputTask = true
outputErrors = true

# dont change anything below here unless you know what you are doing
URL = "https://api.whatexploitsare.online/status/"
previousVersions = {
    "Synapse" : 0,
    "Script-Ware" : 0,
    "Temple" : 0,
    "KRNL" : 0,
    "Electron" : 0,
    "WeAreDevs" : 0,
    "Oxygen" : 0,
    "Fluxus" : 0,
    "Celestial" : 0,
    "Comet" : 0,
    "DX9WARE" : 0,
    "Ro-Ware" : 0
}

while 1:
    for Index in infoToUpdate:
        if infoToUpdate[Index] or multiChannelWebhookUrls[Index] != "":
            if outputTask:
                print(f"Checking current version for {Index}...")
            try:
                currentVersionData = requests.get(URL + Index)
                if Index == "WeAreDevs":
                    currentVersionJson = json.loads(currentVersionData.content)[0][Index + " API"]
                else:
                    currentVersionJson = json.loads(currentVersionData.content)[0][Index]
                if previousVersions[Index] != currentVersionJson["exploit_version"]:
                    if outputTask:
                        print("New version found! Posting to Discord...")
                    previousVersions[Index] = currentVersionJson["exploit_version"]
                    postData = {
                        "content" : '```diff\n' + f'+ {Index} Status Changed!\n+ Is {Index} Updated?: ' + str(currentVersionJson["updated"]) + '\n+ Current Version: ' + str(currentVersionJson["exploit_version"]) + '\n- Roblox Version: ' + str(currentVersionJson["roblox_version"]) + '\n- Last Updated: ' + str(currentVersionJson["last_update"]) + '\n```'
                        }
                    if singleChannelUpdate:
                        #requests.post(yourWebhook,postData)
                        print("Would have posted")
                    if individualUpdates and multiChannelWebhookUrls[Index] != "":
                        requests.post(multiChannelWebhookUrls[Index],postData)
                    if outputTask:
                        print(f"Successfully posted current version info for {Index} to Discord!")
                else:
                    print(f"No new version of {Index} was found.")
            except:
                if outputErrors:
                    print(f"An error occured while trying to get the data for {Index}.\nThis most likely has something to do with the exploit API.")
    if outputTask:
        print(f"Delaying next check for {str(delayTime)} seconds.")
    time.sleep(delayTime)
    if outputTask:
        print("Re-checking exploit versions...")
            
        


